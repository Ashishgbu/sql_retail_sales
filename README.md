# Retail Sales Analysis - SQL Project

## Project Overview

This project demonstrates SQL data analysis skills through a comprehensive examination of retail sales data. The analysis addresses 10 key business questions using advanced SQL techniques including CTEs, window functions, and aggregate operations to extract actionable insights from transactional data.

## Database Schema

**Table Name:** `retail_sales`

| Column Name | Data Type | Description |
|------------|-----------|-------------|
| transactions_id | INT | Primary key, unique transaction identifier |
| sale_date | DATE | Date when the sale occurred |
| sale_time | TIME | Time when the sale occurred |
| customer_id | INT | Unique identifier for customers |
| gender | VARCHAR | Customer gender (Male/Female) |
| age | INT | Customer age |
| category | VARCHAR | Product category (Clothing/Beauty/Electronics) |
| quantiy | INT | Quantity of items purchased |
| price_per_unit | FLOAT | Price per unit of product |
| cogs | FLOAT | Cost of goods sold |
| total_sale | FLOAT | Total sale amount for the transaction |

## Dataset Information

- **Total Records:** 2,000 transactions
- **Time Period:** 2022-2023
- **Categories:** 3 (Clothing, Beauty, Electronics)
- **File Format:** CSV (UTF-8 encoded)

## Business Problems & SQL Solutions

### 1. Retrieve Sales for Specific Date
**Objective:** Find all sales made on November 5, 2022

```sql
SELECT * 
FROM retail_sales
WHERE sale_date = '2022-11-05';
```

### 2. Filter Clothing Sales by Quantity and Date
**Objective:** Retrieve transactions where category is 'Clothing', quantity sold is ≥ 4, and month is November 2022

```sql
SELECT *
FROM retail_sales
WHERE category = 'Clothing' 
  AND YEAR(sale_date) = 2022 
  AND MONTH(sale_date) = 11
  AND quantiy >= 4;
```

### 3. Calculate Total Sales by Category
**Objective:** Determine total revenue generated by each product category

```sql
SELECT 
    category,
    SUM(total_sale) AS total_sales
FROM retail_sales
GROUP BY category;
```

### 4. Average Age of Beauty Category Customers
**Objective:** Find the average age of customers purchasing Beauty products

```sql
SELECT 
    AVG(age) AS avg_age
FROM retail_sales
WHERE category = 'Beauty';
```

### 5. High-Value Transactions
**Objective:** Identify all transactions with total sales exceeding $1,000

```sql
SELECT * 
FROM retail_sales
WHERE total_sale > 1000;
```

### 6. Transaction Count by Gender and Category
**Objective:** Count total transactions made by each gender in each category

```sql
SELECT 
    category,
    gender,
    COUNT(*) AS total_transaction
FROM retail_sales
GROUP BY category, gender;
```

### 7. Best Selling Month Each Year
**Objective:** Calculate average sales per month and identify the top-performing month for each year

```sql
WITH MonthlyAvg AS (
    SELECT 
        YEAR(sale_date) AS year,
        MONTH(sale_date) AS month,
        AVG(total_sale) AS avg_sales
    FROM retail_sales
    GROUP BY YEAR(sale_date), MONTH(sale_date)
),
best_month AS (
    SELECT 
        year, 
        month, 
        avg_sales,
        ROW_NUMBER() OVER (PARTITION BY year ORDER BY avg_sales DESC) AS month_rank
    FROM MonthlyAvg
)
SELECT 
    year,
    month,
    ROUND(avg_sales, 2) AS avg_sales 
FROM best_month
WHERE month_rank = 1;
```

### 8. Top 5 Customers by Total Sales
**Objective:** Identify the five customers with the highest total purchase amounts

```sql
WITH high_sales AS (
    SELECT 
        customer_id,
        SUM(total_sale) AS total_sales
    FROM retail_sales
    GROUP BY customer_id
),
highest_total AS (
    SELECT 
        customer_id,
        total_sales,
        ROW_NUMBER() OVER (ORDER BY total_sales DESC) AS rnk
    FROM high_sales
)
SELECT 
    customer_id,
    total_sales 
FROM highest_total
WHERE rnk <= 5;
```

### 9. Unique Customers per Category
**Objective:** Count distinct customers who purchased from each category

```sql
SELECT 
    category,
    COUNT(DISTINCT customer_id) AS unique_customers
FROM retail_sales
GROUP BY category;
```

### 10. Orders by Time Shift
**Objective:** Categorize orders into shifts (Morning: <12, Afternoon: 12-17, Evening: >17) and count orders per shift

```sql
WITH day_sales AS (
    SELECT *,
        CASE 
            WHEN DATEPART(HOUR, sale_time) < 12 THEN 'Morning'
            WHEN DATEPART(HOUR, sale_time) BETWEEN 12 AND 17 THEN 'Afternoon'
            ELSE 'Evening'
        END AS shift 
    FROM retail_sales
)
SELECT 
    shift,
    COUNT(*) AS number_of_orders
FROM day_sales 
GROUP BY shift;
```

## Data Cleaning Process

Before analysis, the following data cleaning steps were performed:

```sql
-- Check for NULL values
SELECT * 
FROM retail_sales
WHERE sale_date IS NULL 
   OR sale_time IS NULL 
   OR customer_id IS NULL 
   OR gender IS NULL
   OR quantiy IS NULL 
   OR price_per_unit IS NULL 
   OR cogs IS NULL 
   OR total_sale IS NULL;

-- Remove records with NULL values
DELETE FROM retail_sales
WHERE sale_date IS NULL 
   OR sale_time IS NULL 
   OR customer_id IS NULL 
   OR gender IS NULL
   OR quantiy IS NULL 
   OR price_per_unit IS NULL 
   OR cogs IS NULL 
   OR total_sale IS NULL;
```

## SQL Techniques Demonstrated

- **Aggregate Functions:** SUM(), AVG(), COUNT()
- **Date Functions:** YEAR(), MONTH(), DATEPART()
- **Window Functions:** ROW_NUMBER() with PARTITION BY
- **Common Table Expressions (CTEs):** Multi-level CTEs for complex queries
- **CASE Statements:** Conditional logic for categorization
- **GROUP BY:** Data aggregation and grouping
- **Filtering:** WHERE clauses with multiple conditions
- **Data Cleaning:** NULL value detection and removal

## Key Findings

- Comprehensive analysis of 2,000+ retail transactions
- Customer segmentation by demographics and purchase behavior
- Time-based sales patterns identified across different shifts
- Category performance analysis revealing top revenue generators
- High-value customer identification for targeted marketing
- Seasonal trends discovered through monthly analysis

## Tools & Technologies

- **Database:** Microsoft SQL Server
- **Query Language:** T-SQL
- **Development Environment:** SQL Server Management Studio (SSMS)
- **Version Control:** Git/GitHub

## Project Files

```
├── data/
│   └── SQL Retail Sales Analysis_utf.csv
├── queries/
│   └── SQLQuery3.sql.sql
└── README.md
```

## How to Use This Project

1. **Setup Database**
```sql
CREATE DATABASE sql_project_1;
USE sql_project_1;
```

2. **Import Data**
   - Import the CSV file into a table named `retail_sales`

3. **Execute Queries**
   - Open `SQLQuery3.sql.sql` in SQL Server Management Studio
   - Run queries sequentially or individually based on analysis needs

## Learning Outcomes

- Data cleaning and validation in SQL
- Writing complex analytical queries
- Using window functions for ranking and partitioning
- Implementing CTEs for query readability
- Date and time manipulation in SQL
- Aggregation and grouping techniques
- Business problem-solving through data analysis

## Future Enhancements

- Customer lifetime value (CLV) calculation
- Customer churn analysis
- Product recommendation system based on purchase patterns
- Seasonal forecasting models
- Revenue growth analysis year-over-year
- Integration with data visualization tools (Power BI, Tableau)

## Author

**Your Name**
- GitHub: (https://github.com/Ashishgbu)
- LinkedIn: https://www.linkedin.com/in/i-am-ashish/

## License

This project is open source and available under the [MIT License](LICENSE).

---

**Note:** This project is created to demonstrate SQL data analysis capabilities.
